---
layout: post
title:  wiki viewer app [doc]
date:   2017-08-23
categories: javascript, fcc
---

Documenting below was written as I went through building the wikiviewer app. I would work and post script progress as I went. User stories are from [FCC](https://freecodecamp.org).

- - - 

* hint 1 - https://en.wikipedia.org/wiki/Special:Random (to get random entry)

* hint 2 - https://www.mediawiki.org/wiki/API:Main_page (entry to using wiki api)
  
* hint 3 - https://en.wikipedia.org/wiki/Special:ApiSandbox#action=query&titles=Main%20Page&prop=revisions&rvprop=content&format=jsonfm (to experiment with wiki API)



```
<script>
  $(document).ready(function() {
    $('#who1').html("button click works");
    $('#who2').html("so does this");
    
    $('.test').on("click", function() {
      $('.what').toggle();
    });

  })//end of doc load
</script>
```

```
<h1> testing... </h1>
<p class="what" id="who1" style="display:none"></p>
<p class="what" id="who2"></p>
<br />
<button class="test">testing</button>
```
^ just testing and reviewing toggle from last app :)

- - - 
```
<script>
  var input = $("#input");
    $("#submit").on("click", function() {
      alert(input.val());
    }); // this holds val and shows val in alert
</script>
```
- - - 
```
<h1> testing... </h1>

<input type="text" placeholder="search wiki" class="search">
<button class="random">Random Wiki</button>

<p class="wiki"></p>

<script>
 var input = $("#input");
   $(".search").keypress(function(event) {
    if(event.which == 13 || event.keyCode == 13) {
      $(".wiki").html(input.val());
    }
   }); // value put in input field shows up when pressing enter, no submut button
</script>
```
- - - 
```
<h1> testing... </h1>

<input type="text" placeholder="search wiki" class="search" id="input">
<button class="random">Random Wiki</button>

<p class="wiki"></p>

<script> // input value gets appended onto ajax url call-- test proves functional, data output using JSON.stringify
  $(document).ready(function() {
  
    var input = $("#input");
    $(".search").keypress(function(event) {
      if(event.which == 13 || event.keyCode == 13) {
        var title = input.val();
 
        $.ajax({
          url: "https://en.wikipedia.org/w/api.php?action=query&list=search&formatversion=latest&srsearch=" + title + "&srlimit=10&srprop=snippet&format=json",
          dataType: "jsonp",
          success: 
            function(data) {
              $(".wiki").html(JSON.stringify(data)); 
            }
        }); // end of AJAX 

      } // if
    }); // keypress 
     
  });//end of doc load
</script>
```
- - - 
```
<h1> testing... </h1>

<input type="text" placeholder="search wiki" class="search" id="input">
<button class="random">Random Wiki</button>

<p class="wiki"></p>

<script>
  $(document).ready(function() {
  
    var wikiInput = $("#input");
    $(".search").keypress(function(event) {
      if(event.which == 13 || event.keyCode == 13) {
      var wikiSearch = wikiInput.val();
        
        $.ajax({
          url: "https://en.wikipedia.org/w/api.php?action=query&list=search&formatversion=latest&srsearch=" + wikiSearch + "&srlimit=10&srprop=snippet&format=json",
          dataType: "jsonp",
          success: 
            function(data) {
              var search = data.query.search;
              // console.log(search);
              search.forEach(function(el) {  
                // console.log(el)
                console.log(el.title);
                console.log(el.snippet);               
              })
            } //data
        }); // end of AJAX 

      } // if
    }); // keypress 
     
  });//end of doc load
</script>
```
^ getting title/ snippet upon pressing enter on search

- - - 
```
<script>
// script snippet below
  var wikiList = ""; 
  // https://en.wikipedia.org/wiki/[title here]
  search.forEach(function(el) {  
  // console.log(el)
    wikiList += "<div class='wikiEntry'>" + "<strong>" + "<a href='https://en.wikipedia.org/wiki/" + el.title + "'>" + el.title + "</a>" + "</strong>" + "<br />" + el.snippet + " [...]" + "<br />" + "</div>" + "<br />";                 
  }); // end search.forEach
</script>
```
^ title is link now, can go to page of w.e result from w.e input put in input box

- - - 
```
<script>
// script snippet below
  var wikiInput = $("#input");
    $(".search").keypress(function(event) {
      if(event.which == 13 || event.keyCode == 13) {
      var wikiSearch = wikiInput.val();
  $("#input").val(""); // clears search wiki box
</script>
```
^ search wiki box clears after hitting enter/ results load

- - - 
```
<script>
  $(document).ready(function() {
  
    var wikiInput = $("#input");
    $(".search").keypress(function(event) {
      if(event.which == 13 || event.keyCode == 13) {
      var wikiSearch = wikiInput.val();
      $("#input").val(""); // clears search wiki box
        
        $.ajax({
          url: "https://en.wikipedia.org/w/api.php?action=query&list=search&formatversion=latest&srsearch=" + wikiSearch + "&srlimit=max&srprop=snippet&format=json",
          dataType: "jsonp",
          success: 
            function(data) {
              var search = data.query.search;
              // console.log(search);
              var wikiList = ""; 
              // https://en.wikipedia.org/wiki/[title here]
              search.forEach(function(el) {  
                // console.log(el);
                wikiList += "<div class='wikiEntry'>" + "<strong>" + "<a href='https://en.wikipedia.org/wiki/" + el.title + "'>" + el.title + "</a>" + "</strong>" + "<br />" + el.snippet + " [...]" + "<br />" + "</div>" + "<br />";                 
              }); // end search.forEach
              $(".wiki").html(wikiList);
            } //
        }); // end of AJAX 
      } // end of if statement
    }); // end of keypress 
  
    // next up random button :)
    $(".random").on("click", function() {
      $.ajax({
        url: "https://en.wikipedia.org/w/api.php?action=query&format=json&prop=extracts&generator=random&grnnamespace=0",
        dataType: "jsonp",
        success: 
          function(data) {
            var randProp = Object.values(data.query.pages);
            var randWiki = randProp[0]; // has title + extract
            var randWikiTitle = randWiki.title;
            var randWikiExtract = randWiki.extract;
            var randFull =  "<div class='randWikiEntry'>" + "<strong>" + "<a href='https://en.wikipedia.org/wiki/" + randWikiTitle + "'>" + randWikiTitle+ "</a>" + "</strong>" + "<br />" + randWikiExtract + "NOTE: click title link for full wiki page :)" + "<br />" + "</div>" + "<br />";
            $(".wiki").html(randFull); 
          } // 
      }); // end of rand AJAX
    }); // end random button  

  });//end of doc load
</script>
```
^ full script w/ search bar and random button functional

- stylizing left to do/ css
- mobile
